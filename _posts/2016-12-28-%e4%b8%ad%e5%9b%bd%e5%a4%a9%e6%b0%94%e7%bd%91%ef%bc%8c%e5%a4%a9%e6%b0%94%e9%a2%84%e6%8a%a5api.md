---
layout: post
title: 中国天气网，天气预报API
published: true
author: moli
comments: true
date: 2011-11-17 06:11:00
tags:
    - 中国天气网
    - 天气API
categories:
    - other
    - life
permalink: /archives/2734.html
---
这个API是通过解包获得的，也就是，没有官方保障的API。

所以集成到手机或其他应用中的话，最好还是用自己的服务器做一下中转，否则有些数据不能用了也不知道。。。

首先，要获得访问者的城市的ID

这个ID是通过访问IP获得的。如果是手机访问的话，也是可以的。但是我朋友的电信的手机，访问则不对头，ID变成广东那边的了。

访问下面的地址可以获得你的超市ID。返回的就是一段js代码，需要手动分解，获得ID号码。

> 访问 http://61.4.185.48:81/g/

返回

> var ip=&#8221;114.244.74.25&#8243;;var id=101010100;if(typeof(id\_callback)!=&#8221;undefined&#8221;){id\_callback();}

其中的**var id=101010100**就是咱们需要的ID了。这个ID不是邮编。。我觉得用邮编貌似通用很多啊……

再次，获得天气情况

> http://m.weather.com.cn/data/101010100.html

其中的 101010100 就是前面获得的ID，然后根据这个ID，获得天气情况。

返回值是一堆规范的json。如果是手机应用的话，解析很方便。

其中包含了今天到未来5天的天气情况。还有很多重要的信息，可以参考  中城市的天气信息。

完毕，本来打算写一个程序的，但是发现小米天气中的自带了一些我想的功能，就是能在必要的时候提醒我是否要带伞，是否适合出行什么的。

╮(╯▽╰)╭。。省了时间了。。